(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{22956:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var i=a(95155),s=a(34301),n=a(30285),r=a(66695),l=a(85127),c=a(12115),d=a(46081),o=a(63540),u="Progress",[h,m]=(0,d.A)(u),[x,p]=h(u),j=c.forwardRef((e,t)=>{var a,s,n,r;let{__scopeProgress:l,value:c=null,max:d,getValueLabel:u=y,...h}=e;(d||0===d)&&!N(d)&&console.error((a="".concat(d),s="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(s,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let m=N(d)?d:100;null===c||b(c,m)||console.error((n="".concat(c),r="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(r,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let p=b(c,m)?c:null,j=g(p)?u(p,m):void 0;return(0,i.jsx)(x,{scope:l,value:p,max:m,children:(0,i.jsx)(o.sG.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":g(p)?p:void 0,"aria-valuetext":j,role:"progressbar","data-state":A(p,m),"data-value":null!=p?p:void 0,"data-max":m,...h,ref:t})})});j.displayName=u;var f="ProgressIndicator",v=c.forwardRef((e,t)=>{var a;let{__scopeProgress:s,...n}=e,r=p(f,s);return(0,i.jsx)(o.sG.div,{"data-state":A(r.value,r.max),"data-value":null!=(a=r.value)?a:void 0,"data-max":r.max,...n,ref:t})});function y(e,t){return"".concat(Math.round(e/t*100),"%")}function A(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function N(e){return g(e)&&!isNaN(e)&&e>0}function b(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}v.displayName=f;var P=a(59434);let k=c.forwardRef((e,t)=>{let{className:a,value:s,...n}=e;return(0,i.jsx)(j,{ref:t,className:(0,P.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,i.jsx)(v,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});k.displayName=j.displayName;var w=a(87481),q=a(54165),M=a(62523),S=a(85057),D=a(59409),C=a(71603),E=a(23640),F=a(98917),H=a(70154),G=a(93473),I=a(4635),_=a(35317),L=a(68856),R=a(83013);let $={"coco-pith":C.A,"coir-fiber":E.A,"husk-chips":F.A,coconut:H.A,copra:H.A};function B(){let{toast:e}=(0,w.dj)(),[t,a]=(0,c.useState)(!1),d=(0,I.jt)(),o=(0,I.$e)(()=>d?(0,_.P)((0,_.rJ)(d,"products"),(0,_.My)("name","asc")):null,[d]),{data:u,isLoading:h}=(0,I.Ge)(o),m=(0,c.useMemo)(()=>{let e=new Map(G.F.map(e=>[e.id,{...e}]));return u&&u.forEach(t=>{if(e.has(t.id)){let a=e.get(t.id);a.quantity=t.quantity,a.modifiedDate=t.modifiedDate}else e.set(t.id,t)}),Array.from(e.values()).map(e=>({...e,icon:$[e.id]||C.A}))},[u]);async function x(t){if(t.preventDefault(),!d)return void e({variant:"destructive",title:"Error",description:"Firestore is not available."});let i=new FormData(t.currentTarget),s=i.get("product"),n=parseInt(i.get("quantity"),10);if(!s||isNaN(n)||n<=0)return void e({variant:"destructive",title:"Validation Error",description:"Please select a product and enter a positive quantity."});let r=(0,_.H9)(d,"products",s),l=G.F.find(e=>e.id===s);if(!l)return void e({variant:"destructive",title:"Error",description:"Invalid product selected."});try{await (0,_.c4)(d,async e=>{let t=await e.get(r),a=0;if(t.exists())a=t.data().quantity||0;else{let{icon:t,...a}=l;e.set(r,{...a,quantity:0})}let i=a+n;e.update(r,{quantity:i,modifiedDate:_.Dc.now()})}),a(!1),t.target.reset(),e({title:"Stock Added",description:"".concat(n," units have been added to ").concat(l.name,".")})}catch(t){e({variant:"destructive",title:"Error updating stock",description:t.message||"An unknown error occurred"})}}return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h1",{className:"text-3xl font-headline",children:"Stock Management"}),(0,i.jsxs)(q.lG,{open:t,onOpenChange:a,children:[(0,i.jsx)(q.zM,{asChild:!0,children:(0,i.jsxs)(n.$,{children:[(0,i.jsx)(s.A,{className:"mr-2 h-5 w-5"})," Add Stock"]})}),(0,i.jsxs)(q.Cf,{children:[(0,i.jsxs)(q.c7,{children:[(0,i.jsx)(q.L3,{children:"Add Stock Entry"}),(0,i.jsx)(q.rr,{children:"Add a new quantity for an existing product."})]}),(0,i.jsxs)("form",{onSubmit:x,children:[(0,i.jsxs)("div",{className:"space-y-4 py-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(S.J,{htmlFor:"product",children:"Product"}),(0,i.jsxs)(D.l6,{name:"product",required:!0,children:[(0,i.jsx)(D.bq,{children:(0,i.jsx)(D.yv,{placeholder:"Select a product"})}),(0,i.jsx)(D.gC,{children:G.F.map(e=>(0,i.jsx)(D.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(S.J,{htmlFor:"quantity",children:"Quantity"}),(0,i.jsx)(M.p,{id:"quantity",name:"quantity",type:"number",placeholder:"0",required:!0})]})]}),(0,i.jsx)(q.Es,{children:(0,i.jsx)(n.$,{type:"submit",children:"Add Stock"})})]})]})]})]}),(0,i.jsxs)(r.Zp,{children:[(0,i.jsxs)(r.aR,{children:[(0,i.jsx)(r.ZB,{children:"Product Stock"}),(0,i.jsx)(r.BT,{children:"Track quantity, cost, and selling prices for your products."})]}),(0,i.jsx)(r.Wu,{children:(0,i.jsxs)(l.XI,{children:[(0,i.jsx)(l.A0,{children:(0,i.jsxs)(l.Hj,{children:[(0,i.jsx)(l.nd,{children:"Product"}),(0,i.jsx)(l.nd,{className:"hidden md:table-cell",children:"Available Quantity"}),(0,i.jsx)(l.nd,{className:"hidden md:table-cell",children:"Last Modified"}),(0,i.jsx)(l.nd,{className:"hidden md:table-cell",children:"Cost Price"}),(0,i.jsx)(l.nd,{className:"text-right",children:"Selling Price"})]})}),(0,i.jsxs)(l.BF,{children:[h&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Hj,{children:(0,i.jsx)(l.nA,{colSpan:5,children:(0,i.jsx)(L.E,{className:"h-8 w-full"})})}),(0,i.jsx)(l.Hj,{children:(0,i.jsx)(l.nA,{colSpan:5,children:(0,i.jsx)(L.E,{className:"h-8 w-full"})})}),(0,i.jsx)(l.Hj,{children:(0,i.jsx)(l.nA,{colSpan:5,children:(0,i.jsx)(L.E,{className:"h-8 w-full"})})})]}),!h&&m.map(e=>{let t=e.icon||C.A,a="coconut"===e.id?5e4:2e3;return(0,i.jsxs)(l.Hj,{children:[(0,i.jsx)(l.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(t,{className:"h-6 w-6 text-muted-foreground"}),(0,i.jsx)("div",{className:"font-medium",children:e.name})]})}),(0,i.jsx)(l.nA,{className:"hidden md:table-cell",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{children:[e.quantity.toLocaleString()," units"]}),(0,i.jsx)(k,{value:e.quantity/a*100,className:"w-24 h-2"})]})}),(0,i.jsx)(l.nA,{className:"hidden md:table-cell",children:e.modifiedDate?(0,R.GP)(e.modifiedDate.toDate(),"PP pp"):"N/A"}),(0,i.jsxs)(l.nA,{className:"hidden md:table-cell",children:["$",e.costPrice.toFixed(2)]}),(0,i.jsxs)(l.nA,{className:"text-right",children:["$",e.sellingPrice.toFixed(2)]})]},e.id)}),!h&&0===m.length&&(0,i.jsx)(l.Hj,{children:(0,i.jsx)(l.nA,{colSpan:5,className:"text-center",children:"No products found."})})]})]})})]})]})}},23640:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(40157).A)("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]])},40968:(e,t,a)=>{"use strict";a.d(t,{b:()=>l});var i=a(12115),s=a(63540),n=a(95155),r=i.forwardRef((e,t)=>(0,n.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var l=r},70154:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(40157).A)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},71603:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(40157).A)("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},93473:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});var i=a(71603),s=a(23640),n=a(98917),r=a(70154);let l=[{id:"coco-pith",name:"Coco Pith",quantity:0,costPrice:120,sellingPrice:180,icon:i.A},{id:"coir-fiber",name:"Coir Fiber",quantity:0,costPrice:250,sellingPrice:350,icon:s.A},{id:"husk-chips",name:"Husk Chips",quantity:0,costPrice:180,sellingPrice:250,icon:n.A},{id:"coconut",name:"Coconut",quantity:0,costPrice:10,sellingPrice:15,icon:r.A},{id:"copra",name:"Copra",quantity:0,costPrice:30,sellingPrice:45,icon:r.A}]},94649:(e,t,a)=>{Promise.resolve().then(a.bind(a,22956))},98917:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(40157).A)("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,163,33,878,13,152,659,760,474,594,441,684,358],()=>t(94649)),_N_E=e.O()}]);