(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{22956:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var s=a(95155),r=a(34301),n=a(30285),i=a(66695),l=a(85127),c=a(12115),d=a(46081),o=a(63540),u="Progress",[h,x]=(0,d.A)(u),[p,m]=h(u),j=c.forwardRef((e,t)=>{var a,r,n,i;let{__scopeProgress:l,value:c=null,max:d,getValueLabel:u=y,...h}=e;(d||0===d)&&!A(d)&&console.error((a="".concat(d),r="Progress","Invalid prop `max` of value `".concat(a,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let x=A(d)?d:100;null===c||b(c,x)||console.error((n="".concat(c),i="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let m=b(c,x)?c:null,j=N(m)?u(m,x):void 0;return(0,s.jsx)(p,{scope:l,value:m,max:x,children:(0,s.jsx)(o.sG.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":N(m)?m:void 0,"aria-valuetext":j,role:"progressbar","data-state":g(m,x),"data-value":null!=m?m:void 0,"data-max":x,...h,ref:t})})});j.displayName=u;var v="ProgressIndicator",f=c.forwardRef((e,t)=>{var a;let{__scopeProgress:r,...n}=e,i=m(v,r);return(0,s.jsx)(o.sG.div,{"data-state":g(i.value,i.max),"data-value":null!=(a=i.value)?a:void 0,"data-max":i.max,...n,ref:t})});function y(e,t){return"".concat(Math.round(e/t*100),"%")}function g(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function N(e){return"number"==typeof e}function A(e){return N(e)&&!isNaN(e)&&e>0}function b(e,t){return N(e)&&!isNaN(e)&&e<=t&&e>=0}f.displayName=v;var k=a(59434);let w=c.forwardRef((e,t)=>{let{className:a,value:r,...n}=e;return(0,s.jsx)(j,{ref:t,className:(0,k.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...n,children:(0,s.jsx)(f,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});w.displayName=j.displayName;var q=a(87481),P=a(54165),S=a(62523),M=a(85057),E=a(59409),F=a(71603),H=a(23640),C=a(98917),I=a(93473),_=a(90973),G=a(35317),$=a(68856);let B={"coco-pith":F.A,"coir-fiber":H.A,"husk-chips":C.A};function D(){let{toast:e}=(0,q.dj)(),[t,a]=(0,c.useState)(!1),d=(0,_.jt)(),o=(0,_.$e)(()=>d?(0,G.P)((0,G.rJ)(d,"products"),(0,G.My)("name","asc")):null,[d]),{data:u,isLoading:h}=(0,_.Ge)(o),x=(0,c.useMemo)(()=>{let e=new Map(I.F.map(e=>[e.id,{...e}]));return u&&u.forEach(t=>{e.has(t.id)?e.get(t.id).quantity=t.quantity:e.set(t.id,t)}),Array.from(e.values()).map(e=>({...e,icon:B[e.id]||F.A}))},[u]);async function p(t){if(t.preventDefault(),!d)return void e({variant:"destructive",title:"Error",description:"Firestore is not available."});let s=new FormData(t.currentTarget),r=s.get("product"),n=parseInt(s.get("quantity"),10);if(!r||isNaN(n)||n<=0)return void e({variant:"destructive",title:"Validation Error",description:"Please select a product and enter a positive quantity."});let i=(0,G.H9)(d,"products",r),l=I.F.find(e=>e.id===r);if(!l)return void e({variant:"destructive",title:"Error",description:"Invalid product selected."});try{await (0,G.c4)(d,async e=>{let t=await e.get(i);if(t.exists()){let a=t.data().quantity||0;e.update(i,{quantity:a+n})}else{let{icon:t,...a}=l;e.set(i,{...a,quantity:n})}}),a(!1),t.target.reset(),e({title:"Stock Added",description:"".concat(n," units have been added to ").concat(l.name,".")})}catch(t){e({variant:"destructive",title:"Error updating stock",description:t.message||"An unknown error occurred"})}}return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline",children:"Stock Management"}),(0,s.jsxs)(P.lG,{open:t,onOpenChange:a,children:[(0,s.jsx)(P.zM,{asChild:!0,children:(0,s.jsxs)(n.$,{children:[(0,s.jsx)(r.A,{className:"mr-2 h-5 w-5"})," Add Stock"]})}),(0,s.jsxs)(P.Cf,{children:[(0,s.jsxs)(P.c7,{children:[(0,s.jsx)(P.L3,{children:"Add Stock Entry"}),(0,s.jsx)(P.rr,{children:"Add a new quantity for an existing product."})]}),(0,s.jsxs)("form",{onSubmit:p,children:[(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(M.J,{htmlFor:"product",children:"Product"}),(0,s.jsxs)(E.l6,{name:"product",required:!0,children:[(0,s.jsx)(E.bq,{children:(0,s.jsx)(E.yv,{placeholder:"Select a product"})}),(0,s.jsx)(E.gC,{children:I.F.map(e=>(0,s.jsx)(E.eb,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(M.J,{htmlFor:"quantity",children:"Quantity"}),(0,s.jsx)(S.p,{id:"quantity",name:"quantity",type:"number",placeholder:"0",required:!0})]})]}),(0,s.jsx)(P.Es,{children:(0,s.jsx)(n.$,{type:"submit",children:"Add Stock"})})]})]})]})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{children:"Product Stock"}),(0,s.jsx)(i.BT,{children:"Track quantity, cost, and selling prices for your products."})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)(l.XI,{children:[(0,s.jsx)(l.A0,{children:(0,s.jsxs)(l.Hj,{children:[(0,s.jsx)(l.nd,{children:"Product"}),(0,s.jsx)(l.nd,{className:"hidden md:table-cell",children:"Available Quantity"}),(0,s.jsx)(l.nd,{className:"hidden md:table-cell",children:"Cost Price"}),(0,s.jsx)(l.nd,{className:"text-right",children:"Selling Price"})]})}),(0,s.jsxs)(l.BF,{children:[h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Hj,{children:(0,s.jsx)(l.nA,{colSpan:4,children:(0,s.jsx)($.E,{className:"h-8 w-full"})})}),(0,s.jsx)(l.Hj,{children:(0,s.jsx)(l.nA,{colSpan:4,children:(0,s.jsx)($.E,{className:"h-8 w-full"})})}),(0,s.jsx)(l.Hj,{children:(0,s.jsx)(l.nA,{colSpan:4,children:(0,s.jsx)($.E,{className:"h-8 w-full"})})})]}),!h&&x.map(e=>{let t=e.icon||F.A;return(0,s.jsxs)(l.Hj,{children:[(0,s.jsx)(l.nA,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(t,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsx)("div",{className:"font-medium",children:e.name})]})}),(0,s.jsx)(l.nA,{className:"hidden md:table-cell",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:[e.quantity.toLocaleString()," units"]}),(0,s.jsx)(w,{value:e.quantity/2e3*100,className:"w-24 h-2"})]})}),(0,s.jsxs)(l.nA,{className:"hidden md:table-cell",children:["$",e.costPrice.toFixed(2)]}),(0,s.jsxs)(l.nA,{className:"text-right",children:["$",e.sellingPrice.toFixed(2)]})]},e.id)}),!h&&0===x.length&&(0,s.jsx)(l.Hj,{children:(0,s.jsx)(l.nA,{colSpan:4,className:"text-center",children:"No products found."})})]})]})})]})]})}},23640:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]])},71603:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},93473:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});var s=a(71603),r=a(23640),n=a(98917);let i=[{id:"coco-pith",name:"Coco Pith",quantity:0,costPrice:120,sellingPrice:180,icon:s.A},{id:"coir-fiber",name:"Coir Fiber",quantity:0,costPrice:250,sellingPrice:350,icon:r.A},{id:"husk-chips",name:"Husk Chips",quantity:0,costPrice:180,sellingPrice:250,icon:n.A}]},94649:(e,t,a)=>{Promise.resolve().then(a.bind(a,22956))},98917:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[644,992,716,248,239,878,152,659,281,293,608,441,684,358],()=>t(94649)),_N_E=e.O()}]);