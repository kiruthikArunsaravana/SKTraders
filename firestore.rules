/**
 * @fileoverview Firestore Security Rules for HuskTrack.
 *
 * Core Philosophy: This ruleset prioritizes ease of access, allowing all authenticated users to read, modify, or perform any operation across all collections. This is for prototyping purposes only and should be revised for production.
 *
 * Data Structure: Data is stored in top-level collections such as /users/{userId}, /clients/{clientId}, /products/{productId}, etc.
 *
 * Key Security Decisions:
 * - All authenticated users can read all documents.
 * - All authenticated users can create, update, and delete all documents.
 * - No data validation is performed.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows any signed-in user to read and write user data.
     * @path /users/{userId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /users/{userId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write client data.
     * @path /clients/{clientId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /clients/{clientId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write product data.
     * @path /products/{productId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /products/{productId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write stock data.
     * @path /stocks/{stockId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /stocks/{stockId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write sale data.
     * @path /sales/{saleId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /sales/{saleId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write purchase data.
     * @path /purchases/{purchaseId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /purchases/{purchaseId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write receipt data.
     * @path /receipts/{receiptId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /receipts/{receiptId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write expense data.
     * @path /expenses/{expenseId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /expenses/{expenseId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write export data.
     * @path /exports/{exportId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /exports/{exportId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

    /**
     * @description Allows any signed-in user to read and write local_sales data.
     * @path /local_sales/{localSaleId}
     * @allow (read, write): Any signed-in user can read or write.
     * @deny (read, write): No denial conditions in this prototype.
     * @principle Allows any signed-in user to read and write.
     */
    match /local_sales/{localSaleId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }

     /**
      * @description Allows any signed-in user to read and write financial transaction data.
      * @path /financial_transactions/{transactionId}
      * @allow (read, write): Any signed-in user can read or write.
      * @deny (read, write): No denial conditions in this prototype.
      * @principle Allows any signed-in user to read and write.
      */
    match /financial_transactions/{transactionId} {
      allow get, list: if isSignedIn();
      allow create, update, delete: if isSignedIn();
    }
  }

  function isSignedIn() {
    return request.auth != null;
  }
}