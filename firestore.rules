/**
 * @file Firestore Security Rules for SK Traders
 * @core_philosophy This ruleset provides basic protection against unauthorized data access and modification.
 * It is designed to work in conjunction with server-side role-based access control, which handles the actual authorization.
 * All rules in this file are written to deny any operation that is not explicitly permitted by the server.
 * @data_structure The database consists of top-level collections for clients, products, stock, sales, purchases, receipts, expenses, and exports.
 * There is no user-specific data or subcollections.
 * @key_security_decisions All data access is controlled on the server-side via Spring Security. Therefore, these rules primarily act as a fallback to prevent unauthorized direct access to Firestore. No rules are implemented that rely on request.auth information.
 *  All write operations are denied by default.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Controls access to the 'clients' collection.
     * @path /clients/{clientId}
     * @allow (get, list) - Always denied, access controlled by backend
     * @deny (create, update, delete) - Always denied
     * @principle Server-side access control. Prevents any client-side data modification.
     */
    match /clients/{clientId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Controls access to the 'products' collection.
     * @path /products/{productId}
     * @allow (get, list) - Always denied, access controlled by backend
     * @deny (create, update, delete) - Always denied
     * @principle Server-side access control. Prevents any client-side data modification.
     */
    match /products/{productId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Controls access to the 'stocks' collection.
     * @path /stocks/{stockId}
     * @allow (get, list) - Always denied, access controlled by backend
     * @deny (create, update, delete) - Always denied
     * @principle Server-side access control. Prevents any client-side data modification.
     */
    match /stocks/{stockId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Controls access to the 'sales' collection.
     * @path /sales/{saleId}
     * @allow (get, list) - Always denied, access controlled by backend
     * @deny (create, update, delete) - Always denied
     * @principle Server-side access control. Prevents any client-side data modification.
     */
    match /sales/{saleId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Controls access to the 'purchases' collection.
     * @path /purchases/{purchaseId}
     * @allow (get, list) - Always denied, access controlled by backend
     * @deny (create, update, delete) - Always denied
     * @principle Server-side access control. Prevents any client-side data modification.
     */
    match /purchases/{purchaseId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Controls access to the 'receipts' collection.
     * @path /receipts/{receiptId}
     * @allow (get, list) - Always denied, access controlled by backend
     * @deny (create, update, delete) - Always denied
     * @principle Server-side access control. Prevents any client-side data modification.
     */
    match /receipts/{receiptId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Controls access to the 'expenses' collection.
     * @path /expenses/{expenseId}
     * @allow (get, list) - Always denied, access controlled by backend
     * @deny (create, update, delete) - Always denied
     * @principle Server-side access control. Prevents any client-side data modification.
     */
    match /expenses/{expenseId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Controls access to the 'exports' collection.
     * @path /exports/{exportId}
     * @allow (get, list) - Always denied, access controlled by backend
     * @deny (create, update, delete) - Always denied
     * @principle Server-side access control. Prevents any client-side data modification.
     */
    match /exports/{exportId} {
      allow get: if false;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}